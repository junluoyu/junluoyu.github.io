<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="user-scalable=0"/>
<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=0, user-scalable=no"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<meta content="telephone=no" name="format-detection"/>
<title>智慧社区家政服务平台</title>
<link type="text/css" rel="stylesheet" href="../../css/base.css"/>
<link type="text/css" rel="stylesheet" href="../../css/style.css"/>
<link rel="stylesheet" href="../../js/themes/smoothness/jquery-ui.css" />
<script type="text/javascript" src="../../js/jq.js"></script>
<script src="../../js/jquery-ui.js"></script>
<script src="../../js/zh.js"></script>
<script src="../../js/jqSelect.js"></script>
</head>
<body>
     <!--header star-->
<div class="header">
	<div class="warp">
		<a href="../../index.html"  class="left">
		    <img height="70" width="230"src="../../uploads/item/151112-105545-6336.png">
		</a>
		
  <div >
    <div></div>
    <div class="city-select cut_handdler Left">
      <a href="user.html" class="common-bg selector">居民登录</a>
      <a href="user.html" class="common-bg selector">家政服务公司登录</a>
      <a href="../../design.html" class="common-bg selector">家政服务公司注册</a>
      <div>
        <div>
          <div class="showPanel showPanel2 clearfix">
            <div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <span class="common-bg city-logo"></span>
  </div>
		
	<script type="text/javascript">
	var words = 'ABCDEFGHJKLMNPQRSTWXYZ';
	var hot  = [];
	var domain = [];
	hot.push('主站');domain.push('jiazheng');hot.push('威尼斯小区');domain.push('venice');    var data = [];
    var TIP = '输入城市名';
    jQuery (function ($)
    {
    	var search = $(':text#JS_search_city_input_header');
    	search.focus(function () 
    	{
    		$(this).val('');
    	});
    	
    	var box = $('div#JS_header_city_bar_box');
    	var choose = $('a.common-bg.selector');
    	var menu = $('div#JS_hide_city_menu_11');
    	choose.hover (function ()
    	{
    		box.show ();
    		menu.addClass('hover');
    		search.val (TIP);
    	}, function () 
    	{
    		box.hide ();
    		menu.removeClass('hover');
    	});
    	
    	box.hover (function ()
    	{
    		box.show ();
    		menu.addClass('hover');
    	}, function ()
    	{
    		box.hide ();
    		menu.removeClass('hover');
    	});
    	
    	var elem = !$.support.chrome ? document.documentElement : document.body;
    	var doc = $(document);
    	var scrollBar = $('div.scrollBar');
    	var tableList = $('table#JS_header_city_list');
    	var bar = $('span#JS_header_city_bar');
    	var bargap = scrollBar.height() - bar.height();
    	var dh = 191 + bar.height()/2 + elem.scrollTop - parseFloat (bar.css ('margin-top'));
    	var citychar = $('div#JS_header_city_char');
		var chars = $(words.split('')), len = chars.length - 3;
		var citylist = tableList.find('tbody');
		var tablegap = 0;
    	scrollBar.click (function (e) 
    	{
    		e = e || window.event;
    		if (tablegap == 0)
            {
				for ( var i = 0; i < len; i++)
		        {
			        tablegap += tableList.find('tr:eq('+i+')').height();
	        	}
            }
    		var offsetY = e.clientY + elem.scrollTop - dh;
		    offsetY = offsetY < 0 ? 0 : offsetY;
	    	offsetY = offsetY > bargap ? bargap : offsetY;
	    	bar.css ('margin-top', offsetY + 'px');
	    	tableList.css ('margin-top', -tablegap * offsetY / bargap + 'px');
			INDEX = len * offsetY / bargap;
		    return destroy (e);
    	});
    	doc.mousedown (function (e)
    	{
    		e = e || window.event;
    		var target = e.target;
    		if (target !== choose[0] && box.find($(target)).length === 0 && box.is(':visible'))
            {
	            box.hide();
            }
    	}).mouseup (function (e) 
    	{
    		e = e || window.event;
    		$(this).unbind('mousemove');
    		return destroy (e);
    	});
    	var hotcity = $(hot);
	    var city = $('div#JS_header_city_hot');
	    var currentCity = $('#JS_city_current_city'), siteName = $('#DY_site_name');
		hotcity.each (function (i, eleDom)
	    {
		    var a = $ ('<a href="#"></a>');
		    a.click (function ()
		    {
		    	var txt = $(this).text();
		    	currentCity.text (txt);
		    	siteName.text (txt);

		    			    	
		    	for(i=0; i<hot.length; i++)
		    	{
			    	if(hot[i]==txt) location.href = 'http://'+domain[i]+'.mopou.com';
			    }
		    });
		    if (i == 0)
		    {
			    a.html ('<strong>' + eleDom + '</strong>');
		    }
		    else
		    {
			    a.text (eleDom);
		    }
		    city.append(a);
	    });
		
		bar.mousedown (function (e) 
		{
			e = e || window.event;
			if (tablegap == 0)
            {
				for ( var i = 0; i < len; i++)
		        {
			        tablegap += tableList.find('tr:eq('+i+')').height();
	        	}
            }
			var me = $(this);
			var delta = e.clientY - elem.scrollTop - parseFloat (me.css('margin-top'));
			doc.mousemove (function (evt) 
			{
				evt = evt || window.event;
				var y = evt.clientY - elem.scrollTop - delta;
				y = y < 0 ? 0 : y;
				y = y > bargap ? bargap : y;
				me.css ('margin-top', y + 'px');
				tableList.css ('margin-top', -tablegap * y / bargap + 'px');
				INDEX = len * y / bargap;
				return destroy (evt);
			});
			return destroy (e);
		});
		
		chars.each (function (i, dom)
		{
			var a = $('<a href="#"></a>');
			a.mouseover (function ()
			{ 
				var h = 0;
				var index = $(this).index ('div#JS_header_city_char a');
				INDEX = index = index > len ? len : index;
				for ( var i = 0; i < index; i++)
                {
	                h += tableList.find('tr:eq('+i+')').height();
                }
				tableList.animate(
				{
					'margin-top': -h + 7 + 'px'
				}, 'slow');
				
				bar.animate (
				{
					'margin-top': index * bargap / len + 'px'
				}, 'slow');
			}).mouseout(function ()
			{
				tableList.stop();
				bar.stop();
				INDEX = parseFloat (bar.css('margin-top')) * len / bargap;
			});
			a.text (dom);
			citychar.append(a);
			
			var tr = $('<tr><th><div>' + dom + '</div></th><td></td></tr>');
			var td = tr.children('td');
			var d = $(data[i]);
			d.each (function (j, eleDom)
			{
				var a = $('<a href="#">' + eleDom + '</a>');
				a.click (function ()
				{
					var txt = $(this).text();
			    	currentCity.text (txt);
			    	siteName.text (txt + '站');
				});
				td.append(a);
			});
			citylist.append (tr);
		});
		/*
		var scrollBody = $('div.scrollBody')[0];
		if (!$.support.mozilla)
        {
			scrollBody.onmousewheel = function (e) { mouseWheel (e, false, tableList, bar, len, bargap); };
        }
	    else
	    {
	    	scrollBody.addEventListener ('DOMMouseScroll', function (e) { mouseWheel (e, true, tableList, bar, len, bargap) }, false); 
		}
		*/
    });
    
    var INDEX = 0;
    function mouseWheel (e, isMozilla, tableList, bar, len, bargap)
	{
		e = e || window.event;
		var h = 0;
		for ( var i = 0; i < INDEX; i++)
        {
            h += tableList.find('tr:eq('+i+')').height();
        }
		tableList.css('margin-top', -h + 7 + 'px');
		bar.css('margin-top', INDEX * bargap / len + 'px')
     	if (isMozilla)
        {
     		if (e.detail < 0)
            {
     			INDEX--;
     			INDEX = INDEX < 0 ? 0 : INDEX;
            }
        	else 
        	{
        		// down
        		INDEX++;
     			INDEX = INDEX > len ? len : INDEX;
    		}
        }
     	else 
     	{
     		//down
     		if (e.wheelDelta < 0)
            {
     			INDEX++;
     			INDEX = INDEX > len ? len : INDEX;
            }
	    	else
	    	{
	    		INDEX--;
     			INDEX = INDEX < 0 ? 0 : INDEX;
			}	
		}
    	return destroy (e);
	}
    var destroy = function (event)
    {
	    if (!!$.support.msie)
	    {
		    event.returnValue = false;
		    event.cancelBubble = true;
	    }
	    else
	    {
	    	event.preventDefault ();
			event.stopPropagation ();
	    }
	    return false;
    }
</script>
		
		
	
      <ul class="nav">
      <li class="home">
        <a href="../../index.html"  class="">
        </a>
      </li>
      <li class="online">
        <a href="../../www/site/reservation.html" class="">
        </a>
      </li>
      <li class="price">
        <a href="../../www/site/user.html" class="">
        </a>
        </li>
    </ul>
		
	
		
	</div>
</div>
<!--header end-->
<script src="/js/jquery-ui.js"></script>
<div class="warp">
	<div class="resevation clearfix">
		<div class="resevleft clearfix">
			<div class="resevform clearfix">
				<h2>填写服务信息</h2>
			    <div class="servicenike clearfix" >
    				<span class="servicetitle">服务类型：</span>
    				<div class="clearfix" style="width:420px; float:left;margin-top:-10px">
                                        <label class="f_radio unchecked" service="5">
                        家电清洗                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-140759-1528.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="6">
                        家居保养                        <img style="vertical-align: middle;" src="../../uploads/service/20141105-150140-8892.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="7">
                        管道疏通                        <img style="vertical-align: middle;" src="../../uploads/service/20141105-151320-1981.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="8">
                        干洗服务                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-140855-2485.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="15">
                        鲜花服务                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-140937-4913.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="18">
                        月嫂 看护                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-141036-3860.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="19">
                        住家保姆                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-141535-7051.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="24">
                        家电维修                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-141339-6676.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="25">
                        开锁                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-141306-2641.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="26">
                        重体力                        <img style="vertical-align: middle;" src="../../uploads/service/20150331-141501-8353.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="31">
                        日常保洁                        <img style="vertical-align: middle;" src="../../uploads/service/20150409-111014-3048.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="32">
                        新居搬迁                        <img style="vertical-align: middle;" src="../../uploads/service/20150417-103821-4955.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="44">
                        老人看护                        <img style="vertical-align: middle;" src="../../uploads/service/20150603-145901-4242.png" width="30" height="30">
                    </label>
                                        <label class="f_radio unchecked" service="54">
                        地方保洁                        <img style="vertical-align: middle;" src="../../uploads/service/20151114-133717-3494.jpg" width="30" height="30">
                    </label>
                                         </div>       
			    </div>
			    
			    <div class="servicenike clearfix" id="subserviceWarp">
                    	<span class="servicetitle">服务：</span>
                    	<div class="clearfix" style="width:470px; float:left;">
                            <ul id="subservice">
                            </ul>
                        </div>
                  </div>
			    
			   <div id='infoSrevice' style="display:none">
				    <p class='errtipsf'><span>请选择服务类型</span></p>
				</div>
					
				<div class="servicetime clearfix">
					<span class="servicetitle">服务时间：</span>
					<span id='timeforone'>
			            <input type="text" class="date inputselect"   readonly="readonly" name="serviceDate" id="date"  value="如：2013年10月01日" onmouseover="this.focus()" onmouseout="if(this.value=='')this.value='如：2013年10月01日'" onfocus="this.select()" onclick="if(this.value=='如：2013年10月01日')this.value=''"/>
						<div id="datetimeselect" class="selectbox">
                                <div class="cartes" id='cartes'>
                                    <input type="text" value="如：9：00" class="listTxt" id='listTxt' readonly="readonly">
                                    <div class="listBtn"><b></b></div>
                                    <input type="hidden" value="s5" class="listVal">
                                </div>
                                <div class="lists" id='lists'>
                                    <ul class="list" id='list'>
                                    </ul>
                                </div>
                        </div>
					</span>
					<div id="timefortwo" style="display:none;">
						<div id="datetimeselect001" class="selectbox001">
							<div class="cartes">
								<input type="text" value="如：周一" class="listTxt">
								<div class="listBtn"><b></b></div>
								<input type="hidden" value="z5" class="listVal">
							</div>
							<div class="lists">
								<ul class="list">
									<li id="z1" class="cwhite" onclick="setWeek(1)">周一</li>
									<li id="z2" class="cwhite" onclick="setWeek(2)">周二</li>
									<li id="z3" class="cwhite" onclick="setWeek(3)">周三</li>
									<li id="z4" class="cwhite" onclick="setWeek(4)">周四</li>
									<li id="z5" class="cwhite" onclick="setWeek(5)">周五</li>
									<li id="z6" class="cwhite" onclick="setWeek(6)">周六</li>
									<li id="z7" class="cwhite" onclick="setWeek(7)">周日</li>
								</ul>
							</div>
					</div>
					
					<div id="datetimeselect002" class="selectbox002">
							<div class="cartes">
								<input type="text" value="如：9：00" class="listTxt">
								<div class="listBtn"><b></b></div>
								<input type="hidden" value="s5" class="listVal">
							</div>
							<div class="lists">
								<ul class="list">
									<li id="s1" class="cwhite" onclick="setTime(this.innerHTML)">7:30</li>
									<li id="s2" class="cwhite" onclick="setTime(this.innerHTML)">8:00</li>
									<li id="s3" class="cwhite" onclick="setTime(this.innerHTML)">8:30</li>
									<li id="s4" class="cwhite" onclick="setTime(this.innerHTML)">9:00</li>
									<li id="s5" class="cwhite" onclick="setTime(this.innerHTML)">9:30</li>
									<li id="s6" class="cwhite" onclick="setTime(this.innerHTML)">10:00</li>
									<li id="s7" class="cwhite" onclick="setTime(this.innerHTML)">10:30</li>
									<li id="s8" class="cwhite" onclick="setTime(this.innerHTML)">11:00</li>
									<li id="s9" class="cwhite" onclick="setTime(this.innerHTML)">11:30</li>
									<li id="s10" class="cwhite" onclick="setTime(this.innerHTML)">12:00</li>
									<li id="s11" class="cwhite" onclick="setTime(this.innerHTML)">12:30</li>
									<li id="s12" class="cwhite" onclick="setTime(this.innerHTML)">13:00</li>
									<li id="s13" class="cwhite" onclick="setTime(this.innerHTML)">13:30</li>
									<li id="s14" class="cwhite" onclick="setTime(this.innerHTML)">14:00</li>
									<li id="s15" class="cwhite" onclick="setTime(this.innerHTML)">14:30</li>
									<li id="s16" class="cwhite" onclick="setTime(this.innerHTML)">15:00</li>
									<li id="s17" class="cwhite" onclick="setTime(this.innerHTML)">15:30</li>
									<li id="s18" class="cwhite" onclick="setTime(this.innerHTML)">16:00</li>
									<li id="s19" class="cwhite" onclick="setTime(this.innerHTML)">16:30</li>
									<li id="s20" class="cwhite" onclick="setTime(this.innerHTML)">17:00</li>
									<li id="s21" class="cwhite" onclick="setTime(this.innerHTML)">17:30</li>
									<li id="s22" class="cwhite" onclick="setTime(this.innerHTML)">18:00</li>
									<li id="s23" class="cwhite" onclick="setTime(this.innerHTML)">18:30</li>
									<li id="s24" class="cwhite" onclick="setTime(this.innerHTML)">19:00</li>
									<li id="s25" class="cwhite" onclick="setTime(this.innerHTML)">19:30</li>
									<li id="s26" class="cwhite" onclick="setTime(this.innerHTML)">20:00</li>
								</ul>
							</div>
					</div>
						</div>
					<input id='serviceTime' name="serviceTime" type="" value=""/>
					<input id='serviceWeek' type="hidden" value='7'/>
					<span id="timeforthree" style="display:none">
						<input type="text" class="otherinput" id='backInfo' onmouseover="this.focus()" onmouseout="if(this.value=='')this.value='请输入服务时间(例如：2014-02-16 09:30)'" onfocus="this.select()" onclick="if(this.value=='请输入服务时间(例如：2014-02-16 09:30)')this.value=''"/>
				    </span>
				</div>
				
				<input id="serviceType" type="hidden" value="0"/>
				<input id="service" type="hidden" value="0"/>
			    <input id="serviceInfo" type="hidden" value="0"/>
			    <input id="domain_id" type="hidden" value="1"/>
								
				<div id='info1' style="display:none">
				    <p class='errtipsf'><span>请选择服务日期和时间</span></p>
				</div>

				
				<div class="serviceaddress clearfix">
					<div class="servicetitle" style='float:left;font-size:20px;color:#000000;'>服务地址：</div>
						<div class="cartes" >
						广东省XX市						</div>
					<input type="text" class="otherinput" id="address" name="address" style='width:180px;margin-left:10px;float:left' value="如：智慧社区1号楼102" onmouseover="this.focus()" onmouseout="if(this.value=='')this.value='如：智慧社区1号楼102'" onfocus="this.select()" onclick="if(this.value=='如：智慧社区1号楼102')this.value=''"/>
				</div>

				
				<div id='info2' style="display:none">
					<p class='errtipsf'><span id='info2_2'>请填写服务地址</span></p>
				</div>
				
				<p class="serviceclaim clearfix" style='margin-top:30px;'>
					<span class="servicetitle">特殊要求：</span>
					<input type="text" class="otherinput"  id='serviceRequest'  name="serviceRequest" value="如：希望阿姨自带抹布、鞋套" onmouseover="this.focus()" onmouseout="if(this.value=='')this.value='如：希望阿姨自带抹布、鞋套'" onfocus="this.select()" onclick="if(this.value=='如：希望阿姨自带抹布、鞋套')this.value=''"/>
				</p>

				<div style="height:50px"></div>
				<h2 class="mtop">填写客户信息</h2>

				<p class="servicetell clearfix">
					<span class="servicetitle">手机号码：</span>
					<input type="text" onclick="if(this.value=='请输入您的手机号码')this.value=''" onfocus="this.select()" onmouseout="if(this.value=='')this.value='请输入您的手机号码'" onmouseover="this.focus()" value="请输入您的手机号码"  class="otherinput" id='telephone'/>

									</p>
				<div id="info4" style="display:none"><p class="errtipsf"><span>请填写有效的手机号码</span></p></div>			
                				<p class="servicecode clearfix">
					<span class="servicetitle">具体地址：</span>
					<input type="text" onclick="if(this.value=='请输入您的具体地址')this.value=''" onfocus="this.select()" onmouseout="if(this.value=='')this.value='请输入您的具体地址'" onmouseover="this.focus()" value="请输入您的具体地址"  class="otherinput" id='telephone'/>
				</p>
				<input type="hidden" id='code'/>
		        						
				<a href="#" class="submitbtn" id='orderSub'>提交订单</a>
			</div>
			
		</div>
		<div class="resevright">
			<p class="resevone"></p>
			<p class="resevtwo"></p>
			<p class="resevthree sitePhone"><span>0739-5189090</span></p>
		</div>
	</div>
</div>
<script type="text/javascript">
var service = 0;
var checkCodeSendStatus = false; //验证码发送状态
var timestamp=new Date().getTime();
$(function(){
	    //时间下拉
	$("#datetimeselect00").jQSelect(".selectbox00");
	$("#datetimeselect001").jQSelect(".selectbox001");
	$("#datetimeselect002").jQSelect(".selectbox002");
	$("#datetimeselect02").jQSelect(".selectbox03");
});

function getSubService(service){
    $.getJSON('/api/data/?ac=SubService&id='+service,function(data){
       	 html = ''; 
     	$.each(data.data,function(idx,item){
         	if(item.icon !='')  html+='<li class="clearfix"><img width="80" height="80" src="'+item.icon+'"></li>';
             html+='<li class="clearfix"><span class="itemName">名称: '+item.name+'</span><span class="fleft">价格: </span><span class="itemPrice">'+item.price+'</span><span class="fleft">'+item.unitDesc+'</span><span class="fleft">&nbsp;&nbsp;数量: <button class="minus">-</button>&nbsp;<span class="spinnerC" price="'+item.price+'" serviceid="'+item.id+'">0</span>&nbsp;<button class="add">+</button></span>';
        }); 
     	if(html) {
         	html+='<li class="clearfix">总价: <span class="itemPriceLabal">¥ <span id="totalPrice"></span></span></li>';
            $('#subservice').html(html);
            $('#subserviceWarp').show();
        }else $('#subserviceWarp').hide();
    });
}

$(document).on("click", '.add',function(){
    s = $(this).siblings(".spinnerC");
    s.html(parseInt(s.html())+1);
    setTotalPrice();
});
$(document).on("click", '.minus',function(){
    s = $(this).siblings(".spinnerC");
    n = parseInt(s.html())-1;
    if(n<=0) n = 0;
    s.html(n);
    setTotalPrice();
});

function setTotalPrice(){
	price = 0;
	subservice =$(".spinnerC");
	if(subservice){
		$.each(subservice, function(idx, item){
			 item = $(item);
             n = parseInt(item.html());
             itemPrice = parseFloat(item.attr("price"))
             price += n*itemPrice;
	    });
    }
    $('#totalPrice').html(price);
}

$(function(){
		
	$(".f_radio").click(function () {
		$(this).addClass("checked").removeClass("unchecked").siblings(".checked").removeClass("checked").addClass("unchecked");
		service = $(this).attr('service');
		$('#service').val(service);
		getSubService(service);
	});
	//日历
	$("#date").datepicker({
		numberOfMonths: 1,  //显示两个月
        minDate: 0,  //从当前日期起可选
        dateFormat: 'yy-mm-dd',
        maxDate:6
	});
	
	//时间下拉
    $(document).ready(function(){
    	$('.select').removeClass('select');
    	$('.online a').addClass('select');
		$("#datetimeselect").jQSelect(".selectbox");
		$("#datetimeselect02").jQSelect(".selectbox03");

		$('#orderSub').click(function(){
			var date=document.getElementsByName('serviceDate');
			var serviceTime=$('#serviceTime').val();
			var service=$('#service').val();
			var date=$('#date').val();
			var city=$('#city').val();
			var address=$('#address').val();
			var username=$('#username').val();
			var telephone=$('#telephone').val();
			var phoneCode=$('#phoneCode').val();
			var serviceType=$('#serviceType').val();
			var serviceWeek=$('#serviceWeek').val();
			var serviceRequest=$('#serviceRequest').val();
			
			if(serviceRequest=='如：希望阿姨自带抹布、鞋套'){
				serviceRequest='';
			}
			var otherType='';
			if(serviceType==4){
				var datereg = /^(\d{4})\-(\d{2})\-(\d{2}) (\d{2}):(\d{2})$/ ;  		
				otherType=trim($('#backInfo').val());
				if(!datereg.test(otherType)){
					alert("您输入的格式有误，请重新输入！例如：2014-02-16 09:30");
					return false;
				}
			}
			if(date!=null){
				for(var i=0;i<date.length;i++){
					var serviceDate=date[i].value;
				}
			}

			if(service==0){
				$('#infoSrevice').css('display','block');
				$('html, body').animate({scrollTop:0}, 'slow');
				return false;
			}else{
				$('#infoSrevice').css('display','none');
			}
			
			if(serviceTime==''){
				$('#info1').css('display','block');
				$('html, body').animate({scrollTop:0}, 'slow');
				return false;
			}else{
				$('#info1').css('display','none');
			}
			
			if(trim(address)=='' ||address=='请填写具体地址'){
				$('#info2').css('display','block');
				$('html, body').animate({scrollTop:0}, 'slow');
				return false;
			}else{
				$('#info2').css('display','none');
			}
			if(address.length<2){
				$('#info2').css('display','block');
				$('#info2_2').html('请输入合理的地址信息');
				return false;
			}
			var reg=/^1[3|4|5|8][0-9]\d{8}$/;
			if(!reg.test(telephone)){
				$('#info4').css('display','block');
				return false;
			}else{
				$('#info4').css('display','none');
			}
			
						var realCode=$('#code').val();
			if(trim(phoneCode)=='' || phoneCode!=realCode){
				$('#info5').css('display','block');
				return false;
			}else{
				$('#info5').css('display','none');
			}
			
			city = 5947;
			address=encodeURIComponent(address);
			username=encodeURIComponent(username);
			serviceRequest=encodeURIComponent(serviceRequest);
			serviceDate=encodeURIComponent(serviceDate);
			otherType=encodeURIComponent(otherType);
			
			serviceInfo="";
			price = 0;
			subservice =$(".spinnerC");
			if(subservice){
				$.each(subservice, function(idx, item){
    				 item = $(item);
                     n = parseInt(item.html());
                     itemPrice = parseFloat(item.attr("price"))
                     price += n*itemPrice;
                     
                     if(n>0) serviceInfo+=item.attr("serviceid") + ',' + n + ';'; //'serviceInfo'=> '2,1;3,2' // 子服务id,数量;子服务id2,数量
			    });
		    }
		    if(serviceInfo.Length !=0){
		        serviceInfo = serviceInfo.substring(0, serviceInfo.length-1)
		    }
			time = date +' '+ serviceTime;
			domainId = $('#domain_id').val();
			var url="/api/data/?ac=apply&domainId="+domainId+"&week="+serviceWeek+"&time="+time+"&serviceTimes="+serviceTime+"&service="+service+"&serviceInfo="+serviceInfo+"&price="+price+"&city="+city+
			"&address="+address+"&phone="+telephone+"&remark="+serviceRequest+"&type="+2+"&cleanType="+3+"&size="+3;
				
			$.getJSON(url, function(result){
				if(result.status=='200'){
					alert("提交成功");
				    //location.href="/www/site/userPay/orderId/"+result.data.id;
				}else{
					alert("下单失败,请重新下单");
				}
			});
		});

		$('#checkCode').click(function(){
			var telephone=trim($('#telephone').val());
			var reg=/^1[3|4|5|8][0-9]\d{8}$/;
			if(!reg.test(telephone)){
				$('#info4').css('display','block');
				return false;
			}else{
				$('#info4').css('display','none');
			}
			if(checkCodeSendStatus) {
				alert($('#checkCode').html());
				return;
			}
			checkCodeSendStatus = true;
			$('#checkCode').html('正在发送中...');
			var url="/api/data/?ac=verifyCode&type=verifyCodePcApplySubmit&phone="+telephone;
			$.getJSON(url, function(result){
				var text=result.verifyCode;
				$('#code').val(text);
				//alert(result.msg);
				if(result.status == '1') {
					checkCodeSendStatus = true;
					$('#checkCode').html('发送成功');
				}
				else {
					checkCodeSendStatus = false;
					$('#checkCode').html('发送失败');
				}
			});
		});
	});

});
	function setWeek(id){
		$('#serviceWeek').val(id);
	}
	
	function setTime(serviceTime){
		if(serviceTime!=-1){
			$('#serviceTime').val(serviceTime);
		}
		$("#datetimeselect").removeClass("hover");
	}
	function trim(str){ //删除左右两端的空格
	     return str.replace(/(^\s*)|(\s*$)/g, "");
	 }
	$('#carter').mouseover(function(){
		$('.list').html(' ');
		$.post('/www/site/chooseRealServerTime',{},function(msg){
			$('.list').html(msg);
		});
	});

	$('#lists').mouseover(function(){
		$('#list>li').each(function(){
			$(this).mouseover(function(){
				$(this).addClass('cgray');
			});
			$(this).mouseout(function(){
				$(this).removeClass('cgray');
			});
			$(this).click(function(){
				$('#listTxt').val($(this).text());
			});
		});
	});

	$('#cartes').mouseover(function(){
		var dateVal=$('#date').val();
		var reg=/[\u4e00-\u9fa5]+/g;
		if(dateVal!='什么时候服务'){
			var dateVal=dateVal.replace(reg,'-');
			str=dateVal.substr(0,10)+" 23:59:59";
			var new_str = str.replace(/:/g,'-');
			new_str = new_str.replace(/ /g,'-');
			var arr = new_str.split("-");
			var datum = new Date(Date.UTC(arr[0],arr[1]-1,arr[2],arr[3]-8,arr[4],arr[5]));
			var date=datum.getTime()/1000
			var nowdate= new Date().getTime()/1000;
			if(date-nowdate>86400){
				$('#list').html(' ');
				$.post('/www/site/ChooseRealServerTime',{},function(msg){
					$('#list').html(msg);
				});
			}else{
				$('#list').html(' ');
				$.post('/www/site/chooseRealServerTime',{},function(msg){
					$('#list').html(msg);
				});
			}
		}
});

$('#date').change(function(){
	$('#listTxt').val("如：9：00");
	$('#serviceTime').val('');
});
</script><!--footer star-->
<div class="footer">
	<div class="warp">
	<div class='redlinecolor both w960 divcen mt30 he2' style='width:1000px;'></div>
		<p class="footnav">
			<a href="../../www/site/aboutus.html">关于我们</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="../../www/site/contactus.html">联系我们</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="../../www/site/solve.html">常见问题</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</p>
	</div>
</div>
</body>
</html>

